
> strat_plan@0.1.0 dev
> next dev

  â–² Next.js 14.2.33
  - Local:        http://localhost:3000
  - Environments: .env.local
  - Experiments (use with caution):
    Â· optimizeCss

 âœ“ Starting...
 âœ“ Ready in 1032ms
 âœ“ Compiled /middleware in 346ms (486 modules)
 â—‹ Compiling /admin/fiscal-years ...
(node:49531) ExperimentalWarning: Type Stripping is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
 âœ“ Compiled /admin/fiscal-years in 1852ms (1607 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
No authenticated user found in getFiscalYears
 GET /admin/fiscal-years 307 in 1985ms
 âœ“ Compiled in 188ms (326 modules)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (118kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
 âœ“ Compiled / in 127ms (1588 modules)
 HEAD / 307 in 207ms
 GET / 307 in 35ms
 âœ“ Compiled /dashboard in 219ms (1642 modules)
 GET /dashboard 200 in 329ms
 âœ“ Compiled /admin/departments in 167ms (1657 modules)
getDepartmentsWithStats called with filters: {
  status: undefined,
  search: undefined,
  sortBy: undefined,
  sortOrder: undefined
}
Authenticated user ID: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result: {
  userProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing departments query for municipality_id: 00000000-0000-0000-0000-000000000001
Raw departments query result: { count: null, error: null }
DepartmentsPage - departments count: 6
DepartmentsPage - departments: [
  {
    id: '00000000-0000-0000-0000-000000000104',
    name: 'Finance',
    slug: 'finance',
    director_name: 'Amanda Rodriguez',
    director_email: 'arodriguez@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To ensure fiscal responsibility and provide financial expertise supporting city operations.'
  },
  {
    id: '00000000-0000-0000-0000-000000000103',
    name: 'Information Technology',
    slug: 'information-technology',
    director_name: 'Michael Chen',
    director_email: 'mchen@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To deliver innovative technology solutions that enable efficient city operations and excellent citizen services.'
  },
  {
    id: '00000000-0000-0000-0000-000000000102',
    name: 'Parks & Recreation',
    slug: 'parks-recreation',
    director_name: 'Sarah Johnson',
    director_email: 'sjohnson@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To enhance quality of life through exceptional parks, recreation programs, and community spaces.'
  },
  {
    id: '912d395e-73af-4086-acff-d57124923abe',
    name: 'Strategic Services',
    slug: 'strategic-services',
    director_name: 'Krystal Bose',
    director_email: 'krystle.boise@cityofcarrollton.com',
    is_active: true,
    mission_statement: null
  },
  {
    id: 'e15e2d63-0298-4245-a09c-dafb02f46a38',
    name: 'Test Department 1760268016374',
    slug: 'test-department-1760268016374',
    director_name: 'Test Director',
    director_email: 'test@example.com',
    is_active: true,
    mission_statement: 'Test mission statement'
  },
  {
    id: '00000000-0000-0000-0000-000000000101',
    name: 'Water & Field Services',
    slug: 'water-field-services',
    director_name: 'John Smith',
    director_email: 'jsmith@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To provide safe, reliable water services and maintain quality field operations for Carrollton residents.'
  }
]
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 0, error: null }
Fiscal years data: []
 âœ“ Compiled /signup in 124ms (1665 modules)
 HEAD /signup 200 in 153ms
 âœ“ Compiled /login in 130ms (1670 modules)
 POST /admin/fiscal-years 303 in 219ms
 POST /login 200 in 133ms
getDepartmentsWithStats called with filters: {
  status: undefined,
  search: undefined,
  sortBy: undefined,
  sortOrder: undefined
}
Authenticated user ID: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result: {
  userProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing departments query for municipality_id: 00000000-0000-0000-0000-000000000001
Raw departments query result: { count: null, error: null }
DepartmentsPage - departments count: 6
DepartmentsPage - departments: [
  {
    id: '00000000-0000-0000-0000-000000000104',
    name: 'Finance',
    slug: 'finance',
    director_name: 'Amanda Rodriguez',
    director_email: 'arodriguez@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To ensure fiscal responsibility and provide financial expertise supporting city operations.'
  },
  {
    id: '00000000-0000-0000-0000-000000000103',
    name: 'Information Technology',
    slug: 'information-technology',
    director_name: 'Michael Chen',
    director_email: 'mchen@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To deliver innovative technology solutions that enable efficient city operations and excellent citizen services.'
  },
  {
    id: '00000000-0000-0000-0000-000000000102',
    name: 'Parks & Recreation',
    slug: 'parks-recreation',
    director_name: 'Sarah Johnson',
    director_email: 'sjohnson@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To enhance quality of life through exceptional parks, recreation programs, and community spaces.'
  },
  {
    id: '912d395e-73af-4086-acff-d57124923abe',
    name: 'Strategic Services',
    slug: 'strategic-services',
    director_name: 'Krystal Bose',
    director_email: 'krystle.boise@cityofcarrollton.com',
    is_active: true,
    mission_statement: null
  },
  {
    id: 'e15e2d63-0298-4245-a09c-dafb02f46a38',
    name: 'Test Department 1760268016374',
    slug: 'test-department-1760268016374',
    director_name: 'Test Director',
    director_email: 'test@example.com',
    is_active: true,
    mission_statement: 'Test mission statement'
  },
  {
    id: '00000000-0000-0000-0000-000000000101',
    name: 'Water & Field Services',
    slug: 'water-field-services',
    director_name: 'John Smith',
    director_email: 'jsmith@cityofcarrollton.com',
    is_active: true,
    mission_statement: 'To provide safe, reliable water services and maintain quality field operations for Carrollton residents.'
  }
]
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 0, error: null }
Fiscal years data: []
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
No authenticated user found in getFiscalYears
 GET /admin/fiscal-years 307 in 27ms
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
No authenticated user found in getFiscalYears
 GET /admin/fiscal-years 307 in 22ms
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 0, error: null }
Fiscal years data: []
 GET /admin/fiscal-years 200 in 65ms
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 0, error: null }
Fiscal years data: []
 GET /admin/fiscal-years 200 in 47ms
 âœ“ Compiled in 386ms (1679 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
No authenticated user found in getFiscalYears
 âœ“ Compiled in 153ms (1679 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 3, error: null }
Fiscal years data: [
  {
    id: '00000000-0000-0000-0000-000000000203',
    year: 2027,
    start_date: '2026-10-01',
    end_date: '2027-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000202',
    year: 2026,
    start_date: '2025-10-01',
    end_date: '2026-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000201',
    year: 2025,
    start_date: '2024-10-01',
    end_date: '2025-09-30',
    is_current: false
  }
]
 âœ“ Compiled in 127ms (1679 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 3, error: null }
Fiscal years data: [
  {
    id: '00000000-0000-0000-0000-000000000203',
    year: 2027,
    start_date: '2026-10-01',
    end_date: '2027-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000202',
    year: 2026,
    start_date: '2025-10-01',
    end_date: '2026-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000201',
    year: 2025,
    start_date: '2024-10-01',
    end_date: '2025-09-30',
    is_current: false
  }
]
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
No authenticated user found in getFiscalYears
 GET /admin/fiscal-years 307 in 41ms
 âœ“ Compiled in 145ms (1679 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
 â¨¯ app/actions/fiscal-years.ts (39:43) @ getFiscalYears
 â¨¯ ReferenceError: serverSupabase is not defined
    at getFiscalYears (./app/actions/fiscal-years.ts:28:45)
    at FiscalYearsPage (admin/fiscal-years/page.tsx:21:104)
digest: "2595599414"
[0m [90m 37 |[39m[0m
[0m [90m 38 |[39m   [90m// Get current user to fetch their municipality_id[39m[0m
[0m[31m[1m>[22m[39m[90m 39 |[39m   [36mconst[39m { data[33m:[39m { user[33m:[39m currentUser } } [33m=[39m [36mawait[39m serverSupabase[33m.[39mauth[33m.[39mgetUser()[0m
[0m [90m    |[39m                                           [31m[1m^[22m[39m[0m
[0m [90m 40 |[39m[0m
[0m [90m 41 |[39m   [36mif[39m ([33m![39mcurrentUser) {[0m
[0m [90m 42 |[39m     console[33m.[39mlog([32m'No authenticated user found in getFiscalYears'[39m)[0m
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 145ms (1679 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 0, error: null }
Fiscal years data: []
 GET /admin/fiscal-years 200 in 186ms
 âœ“ Compiled in 125ms (1679 modules)
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
Authenticated user ID in getFiscalYears: 35442c29-927d-484e-847f-57d4ad9ff10a
User profile query result in getFiscalYears: {
  currentUserProfile: { municipality_id: '00000000-0000-0000-0000-000000000001' },
  profileError: null
}
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 3, error: null }
Fiscal years data: [
  {
    id: '00000000-0000-0000-0000-000000000203',
    year: 2027,
    start_date: '2026-10-01',
    end_date: '2027-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000202',
    year: 2026,
    start_date: '2025-10-01',
    end_date: '2026-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000201',
    year: 2025,
    start_date: '2024-10-01',
    end_date: '2025-09-30',
    is_current: false
  }
]
getFiscalYears called with filters: { sortBy: undefined, sortOrder: undefined }
No authenticated user found in getFiscalYears
 GET /admin/fiscal-years 307 in 25ms
 âœ“ Compiled in 135ms (1679 modules)
Executing fiscal years query for municipality_id: 00000000-0000-0000-0000-000000000001
Fiscal years query result: { data: 3, error: null }
Fiscal years data: [
  {
    id: '00000000-0000-0000-0000-000000000203',
    year: 2027,
    start_date: '2026-10-01',
    end_date: '2027-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000202',
    year: 2026,
    start_date: '2025-10-01',
    end_date: '2026-09-30',
    is_current: false
  },
  {
    id: '00000000-0000-0000-0000-000000000201',
    year: 2025,
    start_date: '2024-10-01',
    end_date: '2025-09-30',
    is_current: false
  }
]
 âœ“ Compiled in 132ms (1679 modules)
 âœ“ Compiled in 161ms (1679 modules)
 âœ“ Compiled in 143ms (1679 modules)
 âœ“ Compiled /plans in 378ms (1813 modules)
 âœ“ Compiled in 221ms (1827 modules)
 âœ“ Compiled in 152ms (1827 modules)
 âœ“ Compiled in 146ms (1827 modules)
 âœ“ Compiled in 173ms (1827 modules)
 âœ“ Compiled in 353ms (1827 modules)
 GET /admin/fiscal-years 307 in 39ms
 âœ“ Compiled /admin/fiscal-years/[id] in 351ms (1850 modules)
Error fetching fiscal year: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'Cannot coerce the result to a single JSON object'
}
 âœ“ Compiled in 170ms (1864 modules)
 POST /admin/fiscal-years/00000000-0000-0000-0000-000000000203 200 in 58ms
 GET /admin/fiscal-years/00000000-0000-0000-0000-000000000201 307 in 39ms
 âœ“ Compiled in 217ms (1836 modules)
 âœ“ Compiled in 148ms (1836 modules)
 âœ“ Compiled in 161ms (1836 modules)
Error creating strategic plan: {
  code: '42501',
  details: null,
  hint: null,
  message: 'new row violates row-level security policy for table "strategic_plans"'
}
 â¨¯ app/actions/strategic-plans.ts (236:11) @ createStrategicPlan
 â¨¯ Error: Failed to create strategic plan
    at createStrategicPlan (./app/actions/strategic-plans.ts:150:15)
digest: "2164936402"
[0m [90m 234 |[39m   [36mif[39m (error) {[0m
[0m [90m 235 |[39m     console[33m.[39merror([32m'Error creating strategic plan:'[39m[33m,[39m error)[0m
[0m[31m[1m>[22m[39m[90m 236 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to create strategic plan'[39m)[0m
[0m [90m     |[39m           [31m[1m^[22m[39m[0m
[0m [90m 237 |[39m   }[0m
[0m [90m 238 |[39m[0m
[0m [90m 239 |[39m   [36mif[39m ([33m![39mdata) {[0m
 POST /plans 500 in 33ms
Error creating strategic plan: {
  code: '42501',
  details: null,
  hint: null,
  message: 'new row violates row-level security policy for table "strategic_plans"'
}
 â¨¯ app/actions/strategic-plans.ts (236:11) @ createStrategicPlan
 â¨¯ Error: Failed to create strategic plan
    at createStrategicPlan (./app/actions/strategic-plans.ts:150:15)
digest: "2164936402"
[0m [90m 234 |[39m   [36mif[39m (error) {[0m
[0m [90m 235 |[39m     console[33m.[39merror([32m'Error creating strategic plan:'[39m[33m,[39m error)[0m
[0m[31m[1m>[22m[39m[90m 236 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to create strategic plan'[39m)[0m
[0m [90m     |[39m           [31m[1m^[22m[39m[0m
[0m [90m 237 |[39m   }[0m
[0m [90m 238 |[39m[0m
[0m [90m 239 |[39m   [36mif[39m ([33m![39mdata) {[0m
 POST /plans 500 in 35ms
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 409ms (1836 modules)
 â¨¯ components/plans/CreatePlanDialog.tsx (162:24) @ startFiscalYearId
 â¨¯ ReferenceError: startFiscalYearId is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:215:52)
digest: "3331038547"
[0m [90m 160 |[39m               [33m<[39m[33mLabel[39m htmlFor[33m=[39m[32m"start-year"[39m[33m>[39m[33mStart[39m [33mFiscal[39m [33mYear[39m[33m<[39m[33m/[39m[33mLabel[39m[33m>[39m[0m
[0m [90m 161 |[39m               [33m<[39m[33mSelect[39m[0m
[0m[31m[1m>[22m[39m[90m 162 |[39m                 value[33m=[39m{startFiscalYearId}[0m
[0m [90m     |[39m                        [31m[1m^[22m[39m[0m
[0m [90m 163 |[39m                 onValueChange[33m=[39m{handleStartFiscalYearChange}[0m
[0m [90m 164 |[39m                 disabled[33m=[39m{isSubmitting}[0m
[0m [90m 165 |[39m               [33m>[39m[0m
 GET /plans 200 in 264ms
 âœ“ Compiled in 169ms (1836 modules)
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 â¨¯ components/plans/CreatePlanDialog.tsx (147:24) @ startFiscalYearId
 â¨¯ ReferenceError: startFiscalYearId is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:202:52)
digest: "3606218165"
[0m [90m 145 |[39m               [33m<[39m[33mLabel[39m htmlFor[33m=[39m[32m"start-year"[39m[33m>[39m[33mStart[39m [33mFiscal[39m [33mYear[39m[33m<[39m[33m/[39m[33mLabel[39m[33m>[39m[0m
[0m [90m 146 |[39m               [33m<[39m[33mSelect[39m[0m
[0m[31m[1m>[22m[39m[90m 147 |[39m                 value[33m=[39m{startFiscalYearId}[0m
[0m [90m     |[39m                        [31m[1m^[22m[39m[0m
[0m [90m 148 |[39m                 onValueChange[33m=[39m{handleStartFiscalYearChange}[0m
[0m [90m 149 |[39m                 disabled[33m=[39m{isSubmitting}[0m
[0m [90m 150 |[39m               [33m>[39m[0m
 GET /plans 200 in 90ms
 âœ“ Compiled in 170ms (1836 modules)
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 â¨¯ components/plans/CreatePlanDialog.tsx (138:24) @ startFiscalYearId
 â¨¯ ReferenceError: startFiscalYearId is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:195:52)
digest: "1099648024"
[0m [90m 136 |[39m               [33m<[39m[33mLabel[39m htmlFor[33m=[39m[32m"start-year"[39m[33m>[39m[33mStart[39m [33mFiscal[39m [33mYear[39m[33m<[39m[33m/[39m[33mLabel[39m[33m>[39m[0m
[0m [90m 137 |[39m               [33m<[39m[33mSelect[39m[0m
[0m[31m[1m>[22m[39m[90m 138 |[39m                 value[33m=[39m{startFiscalYearId}[0m
[0m [90m     |[39m                        [31m[1m^[22m[39m[0m
[0m [90m 139 |[39m                 onValueChange[33m=[39m{handleStartFiscalYearChange}[0m
[0m [90m 140 |[39m                 disabled[33m=[39m{isSubmitting}[0m
[0m [90m 141 |[39m               [33m>[39m[0m
 GET /plans 200 in 55ms
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 173ms (1836 modules)
 â¨¯ components/plans/CreatePlanDialog.tsx (138:24) @ startFiscalYearId
 â¨¯ ReferenceError: startFiscalYearId is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:195:52)
digest: "1099648024"
[0m [90m 136 |[39m               [33m<[39m[33mLabel[39m htmlFor[33m=[39m[32m"start-year"[39m[33m>[39m[33mStart[39m [33mFiscal[39m [33mYear[39m[33m<[39m[33m/[39m[33mLabel[39m[33m>[39m[0m
[0m [90m 137 |[39m               [33m<[39m[33mSelect[39m[0m
[0m[31m[1m>[22m[39m[90m 138 |[39m                 value[33m=[39m{startFiscalYearId}[0m
[0m [90m     |[39m                        [31m[1m^[22m[39m[0m
[0m [90m 139 |[39m                 onValueChange[33m=[39m{handleStartFiscalYearChange}[0m
[0m [90m 140 |[39m                 disabled[33m=[39m{isSubmitting}[0m
[0m [90m 141 |[39m               [33m>[39m[0m
 GET /plans 200 in 147ms
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 174ms (1836 modules)
 GET /plans 200 in 179ms
Error creating strategic plan: {
  code: '42501',
  details: null,
  hint: null,
  message: 'new row violates row-level security policy for table "strategic_plans"'
}
 â¨¯ app/actions/strategic-plans.ts (236:11) @ createStrategicPlan
 â¨¯ Error: Failed to create strategic plan
    at createStrategicPlan (./app/actions/strategic-plans.ts:150:15)
digest: "2164936402"
[0m [90m 234 |[39m   [36mif[39m (error) {[0m
[0m [90m 235 |[39m     console[33m.[39merror([32m'Error creating strategic plan:'[39m[33m,[39m error)[0m
[0m[31m[1m>[22m[39m[90m 236 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to create strategic plan'[39m)[0m
[0m [90m     |[39m           [31m[1m^[22m[39m[0m
[0m [90m 237 |[39m   }[0m
[0m [90m 238 |[39m[0m
[0m [90m 239 |[39m   [36mif[39m ([33m![39mdata) {[0m
 POST /plans 500 in 52ms
 âœ“ Compiled in 277ms (1836 modules)
 âœ“ Compiled in 142ms (1836 modules)
 âœ“ Compiled in 155ms (1836 modules)
 âœ“ Compiled in 141ms (1836 modules)
 âœ“ Compiled in 182ms (1836 modules)
 âœ“ Compiled in 180ms (1836 modules)
 â¨¯ app/actions/strategic-plans.ts (44:11) @ getStrategicPlans
 â¨¯ Error: Unauthorized
    at getStrategicPlans (./app/actions/strategic-plans.ts:32:15)
    at async Promise.all (index 0)
    at async PlansContent (plans/page.tsx:91:60)
digest: "1652746578"
[0m [90m 42 |[39m[0m
[0m [90m 43 |[39m   [36mif[39m ([33m![39mcurrentUser) {[0m
[0m[31m[1m>[22m[39m[90m 44 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'Unauthorized'[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 45 |[39m   }[0m
[0m [90m 46 |[39m[0m
[0m [90m 47 |[39m   [90m// Get user's municipality and role[39m[0m
 GET /plans 307 in 42ms
 âœ“ Compiled in 176ms (1836 modules)
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 263ms (1836 modules)
 â¨¯ components/plans/CreatePlanDialog.tsx (51:3) @ useEffect
 â¨¯ ReferenceError: useEffect is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:34:5)
digest: "2608333840"
[0m [90m 49 |[39m   [0m
[0m [90m 50 |[39m   [90m// Set default to current fiscal year if available[39m[0m
[0m[31m[1m>[22m[39m[90m 51 |[39m   useEffect(() [33m=>[39m {[0m
[0m [90m    |[39m   [31m[1m^[22m[39m[0m
[0m [90m 52 |[39m     [36mconst[39m currentFiscalYear [33m=[39m fiscalYears[33m.[39mfind(fy [33m=>[39m fy[33m.[39mis_current)[0m
[0m [90m 53 |[39m     [36mif[39m (currentFiscalYear [33m&&[39m [33m![39mfiscalYearId) {[0m
[0m [90m 54 |[39m       setFiscalYearId(currentFiscalYear[33m.[39mid)[0m
 GET /plans 200 in 111ms
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 143ms (1836 modules)
 â¨¯ components/plans/CreatePlanDialog.tsx (147:24) @ fiscalYearId
 â¨¯ ReferenceError: fiscalYearId is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:203:52)
digest: "1622792596"
[0m [90m 145 |[39m               [33m<[39m[33mLabel[39m htmlFor[33m=[39m[32m"fiscal-year"[39m[33m>[39m[33mFiscal[39m [33mYear[39m[33m<[39m[33m/[39m[33mLabel[39m[33m>[39m[0m
[0m [90m 146 |[39m               [33m<[39m[33mSelect[39m[0m
[0m[31m[1m>[22m[39m[90m 147 |[39m                 value[33m=[39m{fiscalYearId}[0m
[0m [90m     |[39m                        [31m[1m^[22m[39m[0m
[0m [90m 148 |[39m                 onValueChange[33m=[39m{setFiscalYearId}[0m
[0m [90m 149 |[39m                 disabled[33m=[39m{isSubmitting}[0m
[0m [90m 150 |[39m               [33m>[39m[0m
 GET /plans 200 in 150ms
 âœ“ Compiled in 147ms (1836 modules)
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 â¨¯ components/plans/CreatePlanDialog.tsx (162:24) @ fiscalYearId
 â¨¯ ReferenceError: fiscalYearId is not defined
    at CreatePlanDialog (./components/plans/CreatePlanDialog.tsx:216:52)
digest: "3065747824"
[0m [90m 160 |[39m               [33m<[39m[33mLabel[39m htmlFor[33m=[39m[32m"fiscal-year"[39m[33m>[39m[33mFiscal[39m [33mYear[39m[33m<[39m[33m/[39m[33mLabel[39m[33m>[39m[0m
[0m [90m 161 |[39m               [33m<[39m[33mSelect[39m[0m
[0m[31m[1m>[22m[39m[90m 162 |[39m                 value[33m=[39m{fiscalYearId}[0m
[0m [90m     |[39m                        [31m[1m^[22m[39m[0m
[0m [90m 163 |[39m                 onValueChange[33m=[39m{setFiscalYearId}[0m
[0m [90m 164 |[39m                 disabled[33m=[39m{isSubmitting}[0m
[0m [90m 165 |[39m               [33m>[39m[0m
 GET /plans 200 in 46ms
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 âœ“ Compiled in 169ms (1836 modules)
 GET /plans 200 in 163ms
 âœ“ Compiled in 133ms (1836 modules)
 â¨¯ app/actions/strategic-plans.ts (44:11) @ getStrategicPlans
 â¨¯ Error: Unauthorized
    at getStrategicPlans (./app/actions/strategic-plans.ts:32:15)
    at async Promise.all (index 0)
    at async PlansContent (plans/page.tsx:91:60)
digest: "2114528784"
[0m [90m 42 |[39m[0m
[0m [90m 43 |[39m   [36mif[39m ([33m![39mcurrentUser) {[0m
[0m[31m[1m>[22m[39m[90m 44 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'Unauthorized'[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 45 |[39m   }[0m
[0m [90m 46 |[39m[0m
[0m [90m 47 |[39m   [90m// Get user's municipality and role[39m[0m
 GET /plans 307 in 26ms
